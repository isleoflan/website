---
import games from "@content/games.json";
---

<div class="games">
  <div class="games__top-bg"></div>
  <div class="games-container">
    {games.map((game, index) => (
      <div class="game" id={`game-${index}`}>
        <div class="game__inner">
          <img src={game.img} alt={game.name} class="game__image" />
        </div>
        <div class="game__overlay">
          <div class="game__overlay__text">
            <h3 class="game__overlay__title">{game.overlay.title}</h3>
            <span class="game__overlay__description">{game.overlay.description}</span>
          </div>
        </div>
      </div>
    ))}
  </div>
  <div class="clear"></div>
</div>

<div class="begin">
  <div class="container begin-container">
    <div class="begin__text">
      <h2>Und das war erst der Anfang!</h2>
      <p>
        Bei uns darfst du spielen, was du willst! Wenn du drei Mitspieler findest, k√∂nnt ihr auch
        Eile mit Weile spielen.
      </p>
      <p class="small">(Dieses Spiel funktioniert auch bei einem Stromausfall)</p>
      <a
        href="https://shop.isleoflan.ch"
        target="_blank"
        tite="Ich bin dabei!"
        class="begin__button button button--white"
        ><span class="button__text">Ich bin dabei!</span></a
      >
    </div>
  </div>
</div>

<style lang="scss">
  @use "../style/abstracts" as *;

  .games {
    position: relative;
    float: left;
    width: 100%;
    overflow: hidden;

    &-container {
      position: relative;
      margin: 0 -100px;
      z-index: 0;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;

      &:before,
      &:after {
        content: "";
        position: absolute;
        top: 0;
        height: 100%;
        width: 10px;
        background-color: white;
        z-index: 1;
      }
      &:before {
        left: 100px;
      }
      &:after {
        right: 100px;
      }
    }

    &__top-bg {
      position: absolute;
      top: -80px;
      left: 0;
      width: 100%;
      background-color: $yellow-dark;
      @include skew-vertical(-3deg);
      height: 150px;
      z-index: 1;
      &:after {
        content: "";
        position: absolute;
        height: 10px;
        width: 100%;
        bottom: -1px;
        left: 0;
        z-index: 1;
        background-color: white;
      }
    }
  }

  .game {
    position: relative;
    float: left;
    width: 50%;
    height: 35vw;
    overflow: hidden;
    border: 5px solid white;

    &__inner {
      position: absolute;
      float: left;
      top: 0;
      left: 0;
      height: 120%;
      width: 120%;
    }

    &__overlay {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
      height: 100%;
      width: 100%;
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
      align-items: center;
      justify-content: center;
      opacity: 0;
      color: $font-light-color;
      @include linear-gradient-blue();

      @include animate(opacity);

      &__text {
        text-align: center;
      }
    }

    &:hover {
      .game__overlay {
        opacity: 1;
      }
    }

    &__image {
      position: absolute;
      left: 50%;
      top: 50%;
      width: 150%;
      transform: translate3d(-50%, -50%, 0);
    }
  }

  #game-0 {
    @include skew(-15deg, 5deg);

    .game__inner,
    .game__overlay__text {
      @include skew(15deg, -5deg);
    }
  }
  #game-1 {
    @include skew(-15deg, -5deg);
    .game__inner,
    .game__overlay__text {
      @include skew(15deg, 5deg);
    }
  }
  #game-2 {
    @include skew(15deg, 5deg);
    .game__inner,
    .game__overlay__text {
      @include skew(-15deg, -5deg);
    }
  }
  #game-3 {
    @include skew(15deg, -5deg);
    .game__inner,
    .game__overlay__text {
      @include skew(-15deg, 5deg);
    }
  }

  .begin {
    position: relative;
    float: left;
    width: 100%;
    color: $font-light-color;

    margin-top: -85px;

    &-container {
      position: relative;
      padding: 100px 0 50px;
      display: flex;
      flex-direction: column;
      align-items: center;
      @include linear-gradient-blue;
      @include skew-vertical(3deg);

      &:after {
        content: "";
        position: absolute;
        top: -1px;
        left: 0;
        height: 10px;
        width: 100%;
        background-color: white;
      }
    }

    &__text {
      width: 100%;
      @include skew-vertical(-3deg);
      @include for-tablet-landscape-up {
        width: 800px;
      }
    }
    &__button {
      margin-top: 88px;
    }
    &:before {
      content: "";
      position: absolute;
      height: 150px;
      width: 100%;
      bottom: -80px;
      left: 0;
      background-color: $blue-dark;
    }
  }
</style>

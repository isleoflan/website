---
import Countdown from "../components/Countdown.astro";
import eventDate from "@content/event-date.json";

const title = 'Isle of LAN &ndash; "Crowned"';
const subtitle = "Die LAN-Party in der Ostschweiz!";

const startDate = new Date(eventDate.start);
const endDate = new Date(eventDate.end);

const startDay = startDate.getDate();
const endDay = endDate.getDate();
const month = endDate.toLocaleString("default", { month: "long" });
const year = endDate.getFullYear();

const location = `${startDay}. - ${endDay}. ${month} ${year}<br> im Auholzsaal in Sulgen`;
---

<section class="next-event">
  <div class="spikes spikes--bottom">
    <img src="/images/spikes.svg" alt="" />
  </div>
  <div class="spikes spikes--right">
    <img src="/images/spikes.svg" alt="" />
  </div>
  <div class="container">
    <div class="left">
      <h1>{title}</h1>
      <h3>{subtitle}</h3>
      <Countdown />
      <h4>{location}</h4>
    </div>
    <div class="right">TICKET DASHBOARD NEWSLETTER</div>
  </div>
</section>

<style lang="scss">
  @use "../style/abstracts" as *;
  .next-event {
    min-height: 100vh;
    width: 100%;
    float: left;

    background-color: $font-light-color;
    position: relative;

    &::before {
      content: "";
      position: absolute;
      top: -20vh;
      left: 0;
      width: 100%;
      height: 120vh;
      @include linear-gradient-blue;
      @include box-shadow;
      @include skew-vertical;

      @include for-desktop-up {
        top: 0;
        min-height: 100vh;
        height: 100%;

        left: -50%;
        @include skew-horizontal;
      }
    }
  }
  .left {
    float: left;
    width: 100%;
    padding-top: 170px;

    color: white;
    text-shadow: 0px 0px 36px rgba(0, 0, 0, 0.16);
    height: calc(100vh - 108px);
    @include for-desktop-up {
      height: initial;
      width: 50%;
      padding-right: 60px;
      padding-bottom: 120px;
    }
    @include for-big-desktop-up {
      padding-right: 120px;
    }
  }
  .right {
    float: left;
    width: 100%;
    padding-top: 170px;
    height: 100vh;
    color: $font-dark-color;

    @include for-desktop-up {
      height: initial;
      padding-left: 60px;
      width: 40%;
      padding-bottom: 120px;
    }
    @include for-big-desktop-up {
      padding-left: 120px;
    }
    .button {
      margin-top: 30px;
    }
  }
  .spikes {
    position: absolute;
    height: 40vh;

    &--bottom {
      bottom: 0;
      left: -5vh;
      display: none;
      @include for-desktop-up {
        display: block;
      }
    }
    &--right {
      right: 0;
      top: -20vh;
      transform: rotate(-90deg);
      transform-origin: bottom right;
    }
    img {
      height: 100%;
    }
  }
  h4 {
    margin-top: 44px;
    text-transform: uppercase;
  }
</style>
